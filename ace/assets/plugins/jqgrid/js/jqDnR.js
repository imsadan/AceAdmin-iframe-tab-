(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.jqDrag=function(f){return g(this,f,"d")};a.fn.jqResize=function(i,f){return g(this,i,"r",f)};a.jqDnR={dnr:{},e:0,drag:function(f){if(j.k=="d"){b.css({left:j.X+f.pageX-j.pX,top:j.Y+f.pageY-j.pY})}else{b.css({width:Math.max(f.pageX-j.pX+j.W,0),height:Math.max(f.pageY-j.pY+j.H,0)});if(k){c.css({width:Math.max(f.pageX-k.pX+k.W,0),height:Math.max(f.pageY-k.pY+k.H,0)})}}return false},stop:function(){a(document).unbind("mousemove",h.drag).unbind("mouseup",h.stop)}};var h=a.jqDnR,j=h.dnr,b=h.e,c,k,g=function(i,l,m,f){return i.each(function(){l=(l)?a(l,i):i;l.bind("mousedown",{e:i,k:m},function(s){var n=s.data,r={};b=n.e;c=f?a(f):false;if(b.css("position")!="relative"){try{b.position(r)}catch(q){}}j={X:r.left||d("left")||0,Y:r.top||d("top")||0,W:d("width")||b[0].scrollWidth||0,H:d("height")||b[0].scrollHeight||0,pX:s.pageX,pY:s.pageY,k:n.k};if(c&&n.k!="d"){k={X:r.left||e("left")||0,Y:r.top||e("top")||0,W:c[0].offsetWidth||e("width")||0,H:c[0].offsetHeight||e("height")||0,pX:s.pageX,pY:s.pageY,k:n.k}}else{k=false}if(a("input.hasDatepicker",b[0])[0]){try{a("input.hasDatepicker",b[0]).datepicker("hide")}catch(o){}}a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop);return false})})},d=function(f){return parseInt(b.css(f),10)||false},e=function(f){return parseInt(c.css(f),10)||false};a.fn.tinyDraggable=function(f){var i=a.extend({handle:0,exclude:0},f);return this.each(function(){var l,m,n=a(this),o=i.handle?a(i.handle,n):n;o.on({mousedown:function(p){if(i.exclude&&~a.inArray(p.target,a(i.exclude,n))){return}p.preventDefault();var q=n.offset();l=p.pageX-q.left,m=p.pageY-q.top;a(document).on("mousemove.drag",function(r){n.offset({top:r.pageY-m,left:r.pageX-l})})},mouseup:function(p){a(document).off("mousemove.drag")}})})}}));