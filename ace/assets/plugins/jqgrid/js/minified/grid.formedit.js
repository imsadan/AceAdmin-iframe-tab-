!function(b){"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],b):b(jQuery)}(function(c){var d={};c.jgrid.extend({editGridRow:function(a,b){var i=c.jgrid.getRegional(this[0],"edit"),j=this[0].p.styleUI,k=c.jgrid.styleUI[j].formedit,l=c.jgrid.styleUI[j].common;return b=c.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:l.overlay,removemodal:!0,form:"edit",template:null,focusField:!0},i,b||{}),d[c(this)[0].p.id]=b,this.each(function(){function ab(){var f,m={};c(g).find(".FormElement").each(function(){var o=c(".customelement",this);if(o.length){var p=o[0],q=c(p).attr("name");c.each(aC.p.colModel,function(){if(this.name===q&&this.editoptions&&c.isFunction(this.editoptions.custom_value)){try{if(aG[q]=this.editoptions.custom_value.call(aC,c("#"+c.jgrid.jqID(q),g),"get"),void 0===aG[q]){throw"e1"}}catch(e){"e1"===e?c.jgrid.info_dialog(af.errcap,"function 'custom_value' "+d[c(this)[0]].p.msg.novalue,d[c(this)[0]].p.bClose,{styleUI:d[c(this)[0]].p.styleUI}):c.jgrid.info_dialog(af.errcap,e.message,d[c(this)[0]].p.bClose,{styleUI:d[c(this)[0]].p.styleUI})}return !0}})}else{switch(c(this).get(0).type){case"checkbox":if(c(this).is(":checked")){aG[this.name]=c(this).val()}else{var r=c(this).attr("offval");aG[this.name]=r}break;case"select-one":aG[this.name]=c("option:selected",this).val();break;case"select-multiple":aG[this.name]=c(this).val(),aG[this.name]?aG[this.name]=aG[this.name].join(","):aG[this.name]="";var s=[];c("option:selected",this).each(function(e,t){s[e]=c(t).text()});break;case"password":case"text":case"textarea":case"button":aG[this.name]=c(this).val();break;case"radio":if(m.hasOwnProperty(this.name)){return !0}m[this.name]=void 0===c(this).attr("offval")?"off":c(this).attr("offval")}aC.p.autoencode&&(aG[this.name]=c.jgrid.htmlEncode(aG[this.name]))}});for(f in m){if(m.hasOwnProperty(f)){var n=c('input[name="'+f+'"]:checked',g).val();aG[f]=void 0!==n?n:m[f],aC.p.autoencode&&(aG[f]=c.jgrid.htmlEncode(aG[f]))}}return !0}function ad(s,v,w,x){var y,z,A,B,C,D,E,F=0,G=[],H=!1,I="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",J="";for(E=1;x>=E;E++){J+=I}if("_empty"!==s&&(H=c(v).jqGrid("getInd",s)),c(v.p.colModel).each(function(e){if(y=this.name,z=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,C=z?"style='display:none'":"","cb"!==y&&"subgrid"!==y&&this.editable===!0&&"rn"!==y){if(H===!1){B=""}else{if(y===v.p.ExpandColumn&&v.p.treeGrid===!0){B=c("td[role='gridcell']:eq("+e+")",v.rows[H]).text()}else{try{B=c.unformat.call(v,c("td[role='gridcell']:eq("+e+")",v.rows[H]),{rowId:s,colModel:this},e)}catch(f){B=this.edittype&&"textarea"===this.edittype?c("td[role='gridcell']:eq("+e+")",v.rows[H]).text():c("td[role='gridcell']:eq("+e+")",v.rows[H]).html()}(!B||"&nbsp;"===B||"&#160;"===B||1===B.length&&160===B.charCodeAt(0))&&(B="")}}var m=c.extend({},this.editoptions||{},{id:y,name:y,rowId:s,oper:"edit"}),o=c.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),p=parseInt(o.rowpos,10)||F+1,q=parseInt(2*(parseInt(o.colpos,10)||1),10);if("_empty"===s&&m.defaultValue&&(B=c.isFunction(m.defaultValue)?m.defaultValue.call(aC):m.defaultValue),this.edittype||(this.edittype="text"),aC.p.autoencode&&(B=c.jgrid.htmlDecode(B)),D=c.jgrid.createEl.call(aC,this.edittype,m,B,!1,c.extend({},c.jgrid.ajaxOptions,v.p.ajaxSelectOptions||{})),"select"===this.edittype&&(B=c(D).val(),"select-multiple"===c(D).get(0).type&&B&&(B=B.join(","))),"checkbox"===this.edittype&&(B=c(D).is(":checked")?c(D).val():c(D).attr("offval")),(d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData[y]=B),c(D).addClass("FormElement"),c.inArray(this.edittype,["text","textarea","password","select"])>-1&&c(D).addClass(k.inputClass),ae){c(ao).find("#"+y).replaceWith(D)}else{if(A=c(w).find("tr[rowpos="+p+"]"),o.rowabove){var t=c("<tr><td class='contentinfo' colspan='"+2*x+"'>"+o.rowcontent+"</td></tr>");c(w).append(t),t[0].rp=p}0===A.length&&(A=c("<tr "+C+" rowpos='"+p+"'></tr>").addClass("FormData").attr("id","tr_"+y),c(A).append(J),c(w).append(A),A[0].rp=p),c("td:eq("+(q-2)+")",A[0]).html("<label for='"+y+"'>"+(void 0===o.label?v.p.colNames[e]:o.label)+"</label>"),c("td:eq("+(q-1)+")",A[0]).append(o.elmprefix).append(D).append(o.elmsuffix)}"custom"===this.edittype&&c.isFunction(m.custom_value)&&m.custom_value.call(aC,c("#"+y,aO),"set",B),c.jgrid.bindEv.call(aC,D,m),G[F]=e,F++}}),F>0){var K;ae?(K="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+v.p.id+"_id' value='"+s+"'/>",c(ao).append(K)):(K=c("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*x-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+v.p.id+"_id' value='"+s+"'/></td></tr>"),K[0].rp=F+999,c(w).append(K)),(d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData[v.p.id+"_id"]=s)}return G}function ah(o,p,q){var r,s,t,u,v,w,x=0;(d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData={},d[aC.p.id]._savedData[p.p.id+"_id"]=o);var y=p.p.colModel;if("_empty"===o){return c(y).each(function(){r=this.name,u=c.extend({},this.editoptions||{}),t=c("#"+c.jgrid.jqID(r),q),t&&t.length&&null!==t[0]&&(v="","custom"===this.edittype&&c.isFunction(u.custom_value)?u.custom_value.call(aC,c("#"+r,q),"set",v):u.defaultValue?(v=c.isFunction(u.defaultValue)?u.defaultValue.call(aC):u.defaultValue,"checkbox"===t[0].type?(w=v.toLowerCase(),w.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==w?(t[0].checked=!0,t[0].defaultChecked=!0,t[0].value=v):(t[0].checked=!1,t[0].defaultChecked=!1)):t.val(v)):"checkbox"===t[0].type?(t[0].checked=!1,t[0].defaultChecked=!1,v=c(t).attr("offval")):t[0].type&&"select"===t[0].type.substr(0,6)?t[0].selectedIndex=0:t.val(v),(d[aC.p.id].checkOnSubmit===!0||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData[r]=v))}),void c("#id_g",q).val(o)}var z=c(p).jqGrid("getInd",o,!0);z&&(c('td[role="gridcell"]',z).each(function(e){if(r=y[e].name,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&y[e].editable===!0){if(r===p.p.ExpandColumn&&p.p.treeGrid===!0){s=c(this).text()}else{try{s=c.unformat.call(p,c(this),{rowId:o,colModel:y[e]},e)}catch(f){s="textarea"===y[e].edittype?c(this).text():c(this).html()}}switch(aC.p.autoencode&&(s=c.jgrid.htmlDecode(s)),(d[aC.p.id].checkOnSubmit===!0||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData[r]=s),r=c.jgrid.jqID(r),y[e].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===s||"&#160;"===s||1===s.length&&160===s.charCodeAt(0))&&(s=""),c("#"+r,q).val(s);break;case"select":var m=s.split(",");m=c.map(m,function(n){return c.trim(n)}),c("#"+r+" option",q).each(function(){y[e].editoptions.multiple||c.trim(s)!==c.trim(c(this).text())&&m[0]!==c.trim(c(this).text())&&m[0]!==c.trim(c(this).val())?y[e].editoptions.multiple&&(c.inArray(c.trim(c(this).text()),m)>-1||c.inArray(c.trim(c(this).val()),m)>-1)?this.selected=!0:this.selected=!1:this.selected=!0}),(d[aC.p.id].checkOnSubmit===!0||d[aC.p.id].checkOnUpdate)&&(s=c("#"+r,q).val(),y[e].editoptions.multiple&&(s=s.join(",")),d[aC.p.id]._savedData[r]=s);break;case"checkbox":if(s=String(s),y[e].editoptions&&y[e].editoptions.value){var A=y[e].editoptions.value.split(":");A[0]===s?c("#"+r,q)[aC.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):c("#"+r,q)[aC.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}else{s=s.toLowerCase(),s.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(c("#"+r,q)[aC.p.useProp?"prop":"attr"]("checked",!0),c("#"+r,q)[aC.p.useProp?"prop":"attr"]("defaultChecked",!0)):(c("#"+r,q)[aC.p.useProp?"prop":"attr"]("checked",!1),c("#"+r,q)[aC.p.useProp?"prop":"attr"]("defaultChecked",!1))}(d[aC.p.id].checkOnSubmit===!0||d[aC.p.id].checkOnUpdate)&&(s=c("#"+r,q).is(":checked")?c("#"+r,q).val():c("#"+r,q).attr("offval"),d[aC.p.id]._savedData[r]=s);break;case"custom":try{if(!y[e].editoptions||!c.isFunction(y[e].editoptions.custom_value)){throw"e1"}y[e].editoptions.custom_value.call(aC,c("#"+r,q),"set",s)}catch(B){"e1"===B?c.jgrid.info_dialog(af.errcap,"function 'custom_value' "+d[c(this)[0]].p.msg.nodefined,c.rp_ge[c(this)[0]].p.bClose,{styleUI:d[c(this)[0]].p.styleUI}):c.jgrid.info_dialog(af.errcap,B.message,c.rp_ge[c(this)[0]].p.bClose,{styleUI:d[c(this)[0]].p.styleUI})}}x++}}),x>0&&(c("#id_g",g).val(o),(d[aC.p.id].checkOnSubmit===!0||d[aC.p.id].checkOnUpdate)&&(d[aC.p.id]._savedData[p.p.id+"_id"]=o)))}function aj(){c.each(aC.p.colModel,function(e,f){f.editoptions&&f.editoptions.NullIfEmpty===!0&&aG.hasOwnProperty(f.name)&&""===aG[f.name]&&(aG[f.name]="null")})}function al(){var s,u,w,x,y,A,B,C=[!0,"",""],D={},E=aC.p.prmNames,F=c(aC).triggerHandler("jqGridAddEditBeforeCheckValues",[c(aO),aK]);F&&"object"==typeof F&&(aG=F),c.isFunction(d[aC.p.id].beforeCheckValues)&&(F=d[aC.p.id].beforeCheckValues.call(aC,aG,c(aO),aK),F&&"object"==typeof F&&(aG=F));for(x in aG){if(aG.hasOwnProperty(x)&&(C=c.jgrid.checkValues.call(aC,aG[x],x),C[0]===!1)){break}}if(aj(),C[0]&&(D=c(aC).triggerHandler("jqGridAddEditClickSubmit",[d[aC.p.id],aG,aK]),void 0===D&&c.isFunction(d[aC.p.id].onclickSubmit)&&(D=d[aC.p.id].onclickSubmit.call(aC,d[aC.p.id],aG,aK)||{}),C=c(aC).triggerHandler("jqGridAddEditBeforeSubmit",[aG,c(aO),aK]),void 0===C&&(C=[!0,"",""]),C[0]&&c.isFunction(d[aC.p.id].beforeSubmit)&&(C=d[aC.p.id].beforeSubmit.call(aC,aG,c(aO),aK))),C[0]&&!d[aC.p.id].processing){if(d[aC.p.id].processing=!0,c("#sData",g+"_2").addClass(l.active),B=d[aC.p.id].url||c(aC).jqGrid("getGridParam","editurl"),w=E.oper,u="clientArray"===B?aC.p.keyName:E.id,aG[w]="_empty"===c.trim(aG[aC.p.id+"_id"])?E.addoper:E.editoper,aG[w]!==E.addoper?aG[u]=aG[aC.p.id+"_id"]:void 0===aG[u]&&(aG[u]=aG[aC.p.id+"_id"]),delete aG[aC.p.id+"_id"],aG=c.extend(aG,d[aC.p.id].editData,D),aC.p.treeGrid===!0){if(aG[w]===E.addoper){y=c(aC).jqGrid("getGridParam","selrow");var G="adjacency"===aC.p.treeGridModel?aC.p.treeReader.parent_id_field:"parent_id";aG[G]=y}for(A in aC.p.treeReader){if(aC.p.treeReader.hasOwnProperty(A)){var H=aC.p.treeReader[A];if(aG.hasOwnProperty(H)){if(aG[w]===E.addoper&&"parent_id_field"===A){continue}delete aG[H]}}}}aG[u]=c.jgrid.stripPref(aC.p.idPrefix,aG[u]);var I=c.extend({url:B,type:d[aC.p.id].mtype,data:c.isFunction(d[aC.p.id].serializeEditData)?d[aC.p.id].serializeEditData.call(aC,aG):aG,complete:function(e,f){var n;if(c("#sData",g+"_2").removeClass(l.active),aG[u]=aC.p.idPrefix+aG[u],e.status>=300&&304!==e.status?(C[0]=!1,C[1]=c(aC).triggerHandler("jqGridAddEditErrorTextFormat",[e,aK]),c.isFunction(d[aC.p.id].errorTextFormat)?C[1]=d[aC.p.id].errorTextFormat.call(aC,e,aK):C[1]=f+" Status: '"+e.statusText+"'. Error code: "+e.status):(C=c(aC).triggerHandler("jqGridAddEditAfterSubmit",[e,aG,aK]),void 0===C&&(C=[!0,"",""]),C[0]&&c.isFunction(d[aC.p.id].afterSubmit)&&(C=d[aC.p.id].afterSubmit.call(aC,e,aG,aK))),C[0]===!1){c(".FormError",aO).html(C[1]),c(".FormError",aO).show()}else{if(aC.p.autoencode&&c.each(aG,function(m,p){aG[m]=c.jgrid.htmlDecode(p)}),aG[w]===E.addoper?(C[2]||(C[2]=c.jgrid.randId()),null==aG[u]||"_empty"===aG[u]?aG[u]=C[2]:C[2]=aG[u],d[aC.p.id].reloadAfterSubmit?c(aC).trigger("reloadGrid"):aC.p.treeGrid===!0?c(aC).jqGrid("addChildNode",C[2],y,aG):c(aC).jqGrid("addRowData",C[2],aG,b.addedrow),d[aC.p.id].closeAfterAdd?(aC.p.treeGrid!==!0&&c(aC).jqGrid("setSelection",C[2]),c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form})):d[aC.p.id].clearAfterAdd&&ah("_empty",aC,aO)):(d[aC.p.id].reloadAfterSubmit?(c(aC).trigger("reloadGrid"),d[aC.p.id].closeAfterEdit||setTimeout(function(){c(aC).jqGrid("setSelection",aG[u])},1000)):aC.p.treeGrid===!0?c(aC).jqGrid("setTreeRow",aG[u],aG):c(aC).jqGrid("setRowData",aG[u],aG),d[aC.p.id].closeAfterEdit&&c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form})),c.isFunction(d[aC.p.id].afterComplete)&&(s=e,setTimeout(function(){c(aC).triggerHandler("jqGridAddEditAfterComplete",[s,aG,c(aO),aK]),d[aC.p.id].afterComplete.call(aC,s,aG,c(aO),aK),s=null},500)),(d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate)&&(c(aO).data("disabled",!1),"_empty"!==d[aC.p.id]._savedData[aC.p.id+"_id"])){for(n in d[aC.p.id]._savedData){d[aC.p.id]._savedData.hasOwnProperty(n)&&aG[n]&&(d[aC.p.id]._savedData[n]=aG[n])}}}d[aC.p.id].processing=!1;try{c(":input:visible",aO)[0].focus()}catch(o){}}},c.jgrid.ajaxOptions,d[aC.p.id].ajaxEditOptions);if(I.url||d[aC.p.id].useDataProxy||(c.isFunction(aC.p.dataProxy)?d[aC.p.id].useDataProxy=!0:(C[0]=!1,C[1]+=" "+af.nourl)),C[0]){if(d[aC.p.id].useDataProxy){var J=aC.p.dataProxy.call(aC,I,"set_"+aC.p.id);void 0===J&&(J=[!0,""]),J[0]===!1?(C[0]=!1,C[1]=J[1]||"Error deleting the selected row!"):(I.data.oper===E.addoper&&d[aC.p.id].closeAfterAdd&&c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),I.data.oper===E.editoper&&d[aC.p.id].closeAfterEdit&&c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}))}else{"clientArray"===I.url?(d[aC.p.id].reloadAfterSubmit=!1,aG=I.data,I.complete({status:200,statusText:""},"")):c.ajax(I)}}}C[0]===!1&&(c(".FormError",aO).html(C[1]),c(".FormError",aO).show())}function an(e,f){var m,n=!1;for(m in e){if(e.hasOwnProperty(m)&&e[m]!=f[m]){n=!0;break}}return n}function ap(){var e=!0;return c(".FormError",aO).hide(),d[aC.p.id].checkOnUpdate&&(aG={},ab(),aI=an(aG,d[aC.p.id]._savedData),aI&&(c(aO).data("disabled",!0),c(".confirm","#"+h.themodal).show(),e=!1)),e}function ar(){var e;if("_empty"!==a&&void 0!==aC.p.savedRow&&aC.p.savedRow.length>0&&c.isFunction(c.fn.jqGrid.restoreRow)){for(e=0;e<aC.p.savedRow.length;e++){if(aC.p.savedRow[e].id===a){c(aC).jqGrid("restoreRow",a);break}}}}function au(e,f){var m=f[1].length-1;0===e?c("#pData",aE).addClass(l.disabled):void 0!==f[1][e-1]&&c("#"+c.jgrid.jqID(f[1][e-1])).hasClass(l.disabled)?c("#pData",aE).addClass(l.disabled):c("#pData",aE).removeClass(l.disabled),e===m?c("#nData",aE).addClass(l.disabled):void 0!==f[1][e+1]&&c("#"+c.jgrid.jqID(f[1][e+1])).hasClass(l.disabled)?c("#nData",aE).addClass(l.disabled):c("#nData",aE).removeClass(l.disabled)}function aw(){var e=c(aC).jqGrid("getDataIDs"),f=c("#id_g",g).val(),m=c.inArray(f,e);return[m,e]}function ay(e){var f="";return"string"==typeof e&&(f=e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,n){return'<span id="'+n+'" ></span>'})),f}function aA(){if(d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate){var m=[],n={};m=c.map(d[aC.p.id]._savedData,function(e,f){return f}),c(".FormElement",ao).each(function(){if(-1===m.indexOf(this.name)){var q=c(this).val(),r=c(this).get(0).type;if("checkbox"===r){c(this).is(":checked")||(q=c(this).attr("offval"))}else{if("select-multiple"===r){q=q.join(",")}else{if("radio"===r){if(n.hasOwnProperty(this.name)){return !0}n[this.name]=void 0===c(this).attr("offval")?"off":c(this).attr("offval")}}}d[aC.p.id]._savedData[this.name]=q}});for(var o in n){if(n.hasOwnProperty(o)){var p=c('input[name="'+o+'"]:checked',ao).val();d[aC.p.id]._savedData[o]=void 0!==p?p:n[o]}}}}var aC=this;if(aC.grid&&a){var aE,aG,aI,aK,aM=aC.p.id,aO="FrmGrid_"+aM,aQ="TblGrid_"+aM,g="#"+c.jgrid.jqID(aQ),h={themodal:"editmod"+aM,modalhead:"edithd"+aM,modalcontent:"editcnt"+aM,scrollelm:aO},Z=!0,aa=1,ac=0,ae="string"==typeof d[aC.p.id].template&&d[aC.p.id].template.length>0,af=c.jgrid.getRegional(this,"errors");d[aC.p.id].styleUI=aC.p.styleUI||"jQueryUI",c.jgrid.isMobile()&&(d[aC.p.id].resize=!1),"new"===a?(a="_empty",aK="add",b.caption=d[aC.p.id].addCaption):(b.caption=d[aC.p.id].editCaption,aK="edit"),b.recreateForm||c(aC).data("formProp")&&c.extend(d[c(this)[0].p.id],c(aC).data("formProp"));var ag=!0;b.checkOnUpdate&&b.jqModal&&!b.modal&&(ag=!1);var ai,ak=isNaN(d[c(this)[0].p.id].dataheight)?d[c(this)[0].p.id].dataheight:d[c(this)[0].p.id].dataheight+"px",am=isNaN(d[c(this)[0].p.id].datawidth)?d[c(this)[0].p.id].datawidth:d[c(this)[0].p.id].datawidth+"px",ao=c("<form name='FormPost' id='"+aO+"' class='FormGrid' onSubmit='return false;' style='width:"+am+";height:"+ak+";'></form>").data("disabled",!1);if(ae?(ai=ay(d[c(this)[0].p.id].template),aE=g):(ai=c("<table id='"+aQ+"' class='EditTable ui-common-table'><tbody></tbody></table>"),aE=g+"_2"),aO="#"+c.jgrid.jqID(aO),c(ao).append("<div class='FormError "+l.error+"' style='display:none;'></div>"),c(ao).append("<div class='tinfo topinfo'>"+d[aC.p.id].topinfo+"</div>"),c(aC.p.colModel).each(function(){var e=this.formoptions;aa=Math.max(aa,e?e.colpos||0:0),ac=Math.max(ac,e?e.rowpos||0:0)}),c(ao).append(ai),Z=c(aC).triggerHandler("jqGridAddEditBeforeInitData",[ao,aK]),void 0===Z&&(Z=!0),Z&&c.isFunction(d[aC.p.id].beforeInitData)&&(Z=d[aC.p.id].beforeInitData.call(aC,ao,aK)),Z!==!1){ar(),ad(a,aC,ai,aa);var aq="rtl"===aC.p.direction?!0:!1,at=aq?"nData":"pData",av=aq?"pData":"nData",ax="<a id='"+at+"' class='fm-button "+l.button+"'><span class='"+l.icon_base+" "+k.icon_prev+"'></span></a>",az="<a id='"+av+"' class='fm-button "+l.button+"'><span class='"+l.icon_base+" "+k.icon_next+"'></span></a>",aB="<a id='sData' class='fm-button "+l.button+"'>"+b.bSubmit+"</a>",aD="<a id='cData' class='fm-button "+l.button+"'>"+b.bCancel+"</a>",aF="<table style='height:auto' class='EditTable ui-common-table' id='"+aQ+"_2'><tbody><tr><td colspan='2'><hr class='"+l.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(aq?az+ax:ax+az)+"</td><td class='EditButton'>"+aB+aD+"</td></tr>";if(aF+="</tbody></table>",ac>0){var aH=[];c.each(c(ai)[0].rows,function(e,f){aH[e]=f}),aH.sort(function(e,f){return e.rp>f.rp?1:e.rp<f.rp?-1:0}),c.each(aH,function(e,f){c("tbody",ai).append(f)})}b.gbox="#gbox_"+c.jgrid.jqID(aM);var aJ=!1;b.closeOnEscape===!0&&(b.closeOnEscape=!1,aJ=!0);var aL;if(ae?(c(ao).find("#pData").replaceWith(ax),c(ao).find("#nData").replaceWith(az),c(ao).find("#sData").replaceWith(aB),c(ao).find("#cData").replaceWith(aD),aL=c("<div id="+aQ+"></div>").append(ao)):aL=c("<div></div>").append(ao).append(aF),c(ao).append("<div class='binfo topinfo bottominfo'>"+d[aC.p.id].bottominfo+"</div>"),c.jgrid.createModal(h,aL,d[c(this)[0].p.id],"#gview_"+c.jgrid.jqID(aC.p.id),c("#gbox_"+c.jgrid.jqID(aC.p.id))[0]),aq&&(c("#pData, #nData",g+"_2").css("float","right"),c(".EditButton",g+"_2").css("text-align","left")),d[aC.p.id].topinfo&&c(".tinfo",aO).show(),d[aC.p.id].bottominfo&&c(".binfo",aO).show(),aL=null,aF=null,c("#"+c.jgrid.jqID(h.themodal)).keydown(function(f){var m=f.target;if(c(aO).data("disabled")===!0){return !1}if(d[aC.p.id].savekey[0]===!0&&f.which===d[aC.p.id].savekey[1]&&"TEXTAREA"!==m.tagName){return c("#sData",g+"_2").trigger("click"),!1}if(27===f.which){return ap()?(aJ&&c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),!1):!1}if(d[aC.p.id].navkeys[0]===!0){if("_empty"===c("#id_g",g).val()){return !0}if(f.which===d[aC.p.id].navkeys[1]){return c("#pData",aE).trigger("click"),!1}if(f.which===d[aC.p.id].navkeys[2]){return c("#nData",aE).trigger("click"),!1}}}),b.checkOnUpdate&&(c("a.ui-jqdialog-titlebar-close span","#"+c.jgrid.jqID(h.themodal)).removeClass("jqmClose"),c("a.ui-jqdialog-titlebar-close","#"+c.jgrid.jqID(h.themodal)).unbind("click").click(function(){return ap()?(c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),!1):!1})),b.saveicon=c.extend([!0,"left",k.icon_save],b.saveicon),b.closeicon=c.extend([!0,"left",k.icon_close],b.closeicon),b.saveicon[0]===!0&&c("#sData",aE).addClass("right"===b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+l.icon_base+" "+b.saveicon[2]+"'></span>"),b.closeicon[0]===!0&&c("#cData",aE).addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+l.icon_base+" "+b.closeicon[2]+"'></span>"),d[aC.p.id].checkOnSubmit||d[aC.p.id].checkOnUpdate){aB="<a id='sNew' class='fm-button "+l.button+"' style='z-index:1002'>"+b.bYes+"</a>",az="<a id='nNew' class='fm-button "+l.button+"' style='z-index:1002;margin-left:5px'>"+b.bNo+"</a>",aD="<a id='cNew' class='fm-button "+l.button+"' style='z-index:1002;margin-left:5px;'>"+b.bExit+"</a>";var aN=b.zIndex||999;aN++,c("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+aN+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+l.content+"' style='z-index:"+(aN+1)+"'>"+b.saveData+"<br/><br/>"+aB+az+aD+"</div>").insertAfter(aO),c("#sNew","#"+c.jgrid.jqID(h.themodal)).click(function(){return al(),c(aO).data("disabled",!1),c(".confirm","#"+c.jgrid.jqID(h.themodal)).hide(),!1}),c("#nNew","#"+c.jgrid.jqID(h.themodal)).click(function(){return c(".confirm","#"+c.jgrid.jqID(h.themodal)).hide(),c(aO).data("disabled",!1),setTimeout(function(){c(":input:visible",aO)[0].focus()},0),!1}),c("#cNew","#"+c.jgrid.jqID(h.themodal)).click(function(){return c(".confirm","#"+c.jgrid.jqID(h.themodal)).hide(),c(aO).data("disabled",!1),c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),!1})}c(aC).triggerHandler("jqGridAddEditInitializeForm",[c(aO),aK]),c.isFunction(d[aC.p.id].onInitializeForm)&&d[aC.p.id].onInitializeForm.call(aC,c(aO),aK),"_empty"!==a&&d[aC.p.id].viewPagerButtons?c("#pData,#nData",aE).show():c("#pData,#nData",aE).hide(),c(aC).triggerHandler("jqGridAddEditBeforeShowForm",[c(aO),aK]),c.isFunction(d[aC.p.id].beforeShowForm)&&d[aC.p.id].beforeShowForm.call(aC,c(aO),aK),aA(),c("#"+c.jgrid.jqID(h.themodal)).data("onClose",d[aC.p.id].onClose),c.jgrid.viewModal("#"+c.jgrid.jqID(h.themodal),{gbox:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,focusField:b.focusField,onHide:function(e){var f=c("#editmod"+aM)[0].style.height,m=c("#editmod"+aM)[0].style.width;f.indexOf("px")>-1&&(f=parseFloat(f)),m.indexOf("px")>-1&&(m=parseFloat(m)),c(aC).data("formProp",{top:parseFloat(c(e.w).css("top")),left:parseFloat(c(e.w).css("left")),width:m,height:f,dataheight:c(aO).height(),datawidth:c(aO).width()}),e.w.remove(),e.o&&e.o.remove()}}),ag||c("."+c.jgrid.jqID(b.overlayClass)).click(function(){return ap()?(c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),!1):!1}),c(".fm-button","#"+c.jgrid.jqID(h.themodal)).hover(function(){c(this).addClass(l.hover)},function(){c(this).removeClass(l.hover)}),c("#sData",aE).click(function(){return aG={},c(".FormError",aO).hide(),ab(),"_empty"===aG[aC.p.id+"_id"]?al():b.checkOnSubmit===!0?(aI=an(aG,d[aC.p.id]._savedData),aI?(c(aO).data("disabled",!0),c(".confirm","#"+c.jgrid.jqID(h.themodal)).show()):al()):al(),!1}),c("#cData",aE).click(function(){return ap()?(c.jgrid.hideModal("#"+c.jgrid.jqID(h.themodal),{gb:"#gbox_"+c.jgrid.jqID(aM),jqm:b.jqModal,onClose:d[aC.p.id].onClose,removemodal:d[aC.p.id].removemodal,formprop:!d[aC.p.id].recreateForm,form:d[aC.p.id].form}),!1):!1}),c("#nData",aE).click(function(){if(!ap()){return !1}c(".FormError",aO).hide();var e=aw();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){c(aC).triggerHandler("jqGridAddEditClickPgButtons",["next",c(aO),e[1][e[0]]]);var f;if(c.isFunction(b.onclickPgButtons)&&(f=b.onclickPgButtons.call(aC,"next",c(aO),e[1][e[0]]),void 0!==f&&f===!1)){return !1}if(c("#"+c.jgrid.jqID(e[1][e[0]+1])).hasClass(l.disabled)){return !1}ah(e[1][e[0]+1],aC,aO),c(aC).jqGrid("setSelection",e[1][e[0]+1]),c(aC).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",c(aO),e[1][e[0]]]),c.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(aC,"next",c(aO),e[1][e[0]+1]),aA(),au(e[0]+1,e)}return !1}),c("#pData",aE).click(function(){if(!ap()){return !1}c(".FormError",aO).hide();var e=aw();if(-1!==e[0]&&e[1][e[0]-1]){c(aC).triggerHandler("jqGridAddEditClickPgButtons",["prev",c(aO),e[1][e[0]]]);var f;if(c.isFunction(b.onclickPgButtons)&&(f=b.onclickPgButtons.call(aC,"prev",c(aO),e[1][e[0]]),void 0!==f&&f===!1)){return !1}if(c("#"+c.jgrid.jqID(e[1][e[0]-1])).hasClass(l.disabled)){return !1}ah(e[1][e[0]-1],aC,aO),c(aC).jqGrid("setSelection",e[1][e[0]-1]),c(aC).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",c(aO),e[1][e[0]]]),c.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(aC,"prev",c(aO),e[1][e[0]-1]),aA(),au(e[0]-1,e)}return !1}),c(aC).triggerHandler("jqGridAddEditAfterShowForm",[c(aO),aK]),c.isFunction(d[aC.p.id].afterShowForm)&&d[aC.p.id].afterShowForm.call(aC,c(aO),aK);var aP=aw();au(aP[0],aP)}}})},viewGridRow:function(a,b){var i=c.jgrid.getRegional(this[0],"view"),j=this[0].p.styleUI,k=c.jgrid.styleUI[j].formedit,l=c.jgrid.styleUI[j].common;return b=c.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},i,b||{}),d[c(this)[0].p.id]=b,this.each(function(){function L(){(d[V.p.id].closeOnEscape===!0||d[V.p.id].navkeys[0]===!0)&&setTimeout(function(){c(".ui-jqdialog-titlebar-close","#"+c.jgrid.jqID(ab.modalhead)).attr("tabindex","-1").focus()},0)}function N(A,B,C,D){var E,F,G,H,I,ak,al,am,an,ao=0,ap=[],aq=!1,ar="<td class='CaptionTD form-view-label "+l.content+"' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+l.content+"'>&#160;</td>",at="",au="<td class='CaptionTD form-view-label "+l.content+"'>&#160;</td><td class='DataTD form-view-data "+l.content+"'>&#160;</td>",av=["integer","number","currency"],aw=0,ax=0;for(ak=1;D>=ak;ak++){at+=1===ak?ar:au}if(c(B.p.colModel).each(function(){F=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,F||"right"!==this.align||(this.formatter&&-1!==c.inArray(this.formatter,av)?aw=Math.max(aw,parseInt(this.width,10)):ax=Math.max(ax,parseInt(this.width,10)))}),al=0!==aw?aw:0!==ax?ax:0,aq=c(B).jqGrid("getInd",A),c(B.p.colModel).each(function(e){if(E=this.name,am=!1,F=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,I=F?"style='display:none'":"",an="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==E&&"subgrid"!==E&&"rn"!==E&&an){H=aq===!1?"":E===B.p.ExpandColumn&&B.p.treeGrid===!0?c("td:eq("+e+")",B.rows[aq]).text():c("td:eq("+e+")",B.rows[aq]).html(),am="right"===this.align&&0!==al?!0:!1;var f=c.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),n=parseInt(f.rowpos,10)||ao+1,o=parseInt(2*(parseInt(f.colpos,10)||1),10);if(f.rowabove){var p=c("<tr><td class='contentinfo' colspan='"+2*D+"'>"+f.rowcontent+"</td></tr>");c(C).append(p),p[0].rp=n}G=c(C).find("tr[rowpos="+n+"]"),0===G.length&&(G=c("<tr "+I+" rowpos='"+n+"'></tr>").addClass("FormData").attr("id","trv_"+E),c(G).append(at),c(C).append(G),G[0].rp=n),c("td:eq("+(o-2)+")",G[0]).html("<b>"+(void 0===f.label?B.p.colNames[e]:f.label)+"</b>"),c("td:eq("+(o-1)+")",G[0]).append("<span>"+H+"</span>").attr("id","v_"+E),am&&c("td:eq("+(o-1)+") span",G[0]).css({"text-align":"right",width:al+"px"}),ap[ao]=e,ao++}}),ao>0){var ay=c("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*D-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+A+"'/></td></tr>");ay[0].rp=ao+99,c(C).append(ay)}return ap}function R(m,n){var o,p,q,r,s=0;r=c(n).jqGrid("getInd",m,!0),r&&(c("td",r).each(function(e){o=n.p.colModel[e].name,p=n.p.colModel[e].editrules&&n.p.colModel[e].editrules.edithidden===!0?!1:n.p.colModel[e].hidden===!0?!0:!1,"cb"!==o&&"subgrid"!==o&&"rn"!==o&&(q=o===n.p.ExpandColumn&&n.p.treeGrid===!0?c(this).text():c(this).html(),o=c.jgrid.jqID("v_"+o),c("#"+o+" span","#"+Y).html(q),p&&c("#"+o,"#"+Y).parents("tr:first").hide(),s++)}),s>0&&c("#id_g","#"+Y).val(m))}function T(e,f){var m=f[1].length-1;0===e?c("#pData","#"+Y+"_2").addClass(l.disabled):void 0!==f[1][e-1]&&c("#"+c.jgrid.jqID(f[1][e-1])).hasClass(l.disabled)?c("#pData",Y+"_2").addClass(l.disabled):c("#pData","#"+Y+"_2").removeClass(l.disabled),e===m?c("#nData","#"+Y+"_2").addClass(l.disabled):void 0!==f[1][e+1]&&c("#"+c.jgrid.jqID(f[1][e+1])).hasClass(l.disabled)?c("#nData",Y+"_2").addClass(l.disabled):c("#nData","#"+Y+"_2").removeClass(l.disabled)}function U(){var e=c(V).jqGrid("getDataIDs"),f=c("#id_g","#"+Y).val(),m=c.inArray(f,e);return[m,e]}var V=this;if(V.grid&&a){var W=V.p.id,X="ViewGrid_"+c.jgrid.jqID(W),Y="ViewTbl_"+c.jgrid.jqID(W),Z="ViewGrid_"+W,aa="ViewTbl_"+W,ab={themodal:"viewmod"+W,modalhead:"viewhd"+W,modalcontent:"viewcnt"+W,scrollelm:X},ac=c.isFunction(d[V.p.id].beforeInitData)?d[V.p.id].beforeInitData:!1,ad=!0,ae=1,af=0;d[V.p.id].styleUI=V.p.styleUI||"jQueryUI",b.recreateForm||c(V).data("viewProp")&&c.extend(d[c(this)[0].p.id],c(V).data("viewProp"));var ag=isNaN(d[c(this)[0].p.id].dataheight)?d[c(this)[0].p.id].dataheight:d[c(this)[0].p.id].dataheight+"px",ah=isNaN(d[c(this)[0].p.id].datawidth)?d[c(this)[0].p.id].datawidth:d[c(this)[0].p.id].datawidth+"px",ai=c("<form name='FormPost' id='"+Z+"' class='FormGrid' style='width:"+ah+";height:"+ag+";'></form>"),aj=c("<table id='"+aa+"' class='EditTable ViewTable'><tbody></tbody></table>");if(c(V.p.colModel).each(function(){var e=this.formoptions;ae=Math.max(ae,e?e.colpos||0:0),af=Math.max(af,e?e.rowpos||0:0)}),c(ai).append(aj),ac&&(ad=ac.call(V,ai),void 0===ad&&(ad=!0)),ad!==!1){N(a,V,aj,ae);var g="rtl"===V.p.direction?!0:!1,h=g?"nData":"pData",J=g?"pData":"nData",K="<a id='"+h+"' class='fm-button "+l.button+"'><span class='"+l.icon_base+" "+k.icon_prev+"'></span></a>",M="<a id='"+J+"' class='fm-button "+l.button+"'><span class='"+l.icon_base+" "+k.icon_next+"'></span></a>",O="<a id='cData' class='fm-button "+l.button+"'>"+b.bClose+"</a>";if(af>0){var P=[];c.each(c(aj)[0].rows,function(e,f){P[e]=f}),P.sort(function(e,f){return e.rp>f.rp?1:e.rp<f.rp?-1:0}),c.each(P,function(e,f){c("tbody",aj).append(f)})}b.gbox="#gbox_"+c.jgrid.jqID(W);var Q=c("<div></div>").append(ai).append("<table border='0' class='EditTable' id='"+Y+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(g?M+K:K+M)+"</td><td class='EditButton'>"+O+"</td></tr></tbody></table>");c.jgrid.createModal(ab,Q,d[c(this)[0].p.id],"#gview_"+c.jgrid.jqID(V.p.id),c("#gview_"+c.jgrid.jqID(V.p.id))[0]),g&&(c("#pData, #nData","#"+Y+"_2").css("float","right"),c(".EditButton","#"+Y+"_2").css("text-align","left")),b.viewPagerButtons||c("#pData, #nData","#"+Y+"_2").hide(),Q=null,c("#"+ab.themodal).keydown(function(e){if(27===e.which){return d[V.p.id].closeOnEscape&&c.jgrid.hideModal("#"+c.jgrid.jqID(ab.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose,removemodal:d[V.p.id].removemodal,formprop:!d[V.p.id].recreateForm,form:d[V.p.id].form}),!1}if(b.navkeys[0]===!0){if(e.which===b.navkeys[1]){return c("#pData","#"+Y+"_2").trigger("click"),!1}if(e.which===b.navkeys[2]){return c("#nData","#"+Y+"_2").trigger("click"),!1}}}),b.closeicon=c.extend([!0,"left",k.icon_close],b.closeicon),b.closeicon[0]===!0&&c("#cData","#"+Y+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+l.icon_base+" "+b.closeicon[2]+"'></span>"),c.isFunction(b.beforeShowForm)&&b.beforeShowForm.call(V,c("#"+X)),c.jgrid.viewModal("#"+c.jgrid.jqID(ab.themodal),{gbox:"#gbox_"+c.jgrid.jqID(W),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,onHide:function(e){c(V).data("viewProp",{top:parseFloat(c(e.w).css("top")),left:parseFloat(c(e.w).css("left")),width:c(e.w).width(),height:c(e.w).height(),dataheight:c("#"+X).height(),datawidth:c("#"+X).width()}),e.w.remove(),e.o&&e.o.remove()}}),c(".fm-button:not(."+l.disabled+")","#"+Y+"_2").hover(function(){c(this).addClass(l.hover)},function(){c(this).removeClass(l.hover)}),L(),c("#cData","#"+Y+"_2").click(function(){return c.jgrid.hideModal("#"+c.jgrid.jqID(ab.themodal),{gb:"#gbox_"+c.jgrid.jqID(W),jqm:b.jqModal,onClose:b.onClose,removemodal:d[V.p.id].removemodal,formprop:!d[V.p.id].recreateForm,form:d[V.p.id].form}),!1}),c("#nData","#"+Y+"_2").click(function(){c("#FormError","#"+Y).hide();var e=U();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(c.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(V,"next",c("#"+X),e[1][e[0]]),R(e[1][e[0]+1],V),c(V).jqGrid("setSelection",e[1][e[0]+1]),c.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(V,"next",c("#"+X),e[1][e[0]+1]),T(e[0]+1,e)),L(),!1}),c("#pData","#"+Y+"_2").click(function(){c("#FormError","#"+Y).hide();var e=U();return -1!==e[0]&&e[1][e[0]-1]&&(c.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(V,"prev",c("#"+X),e[1][e[0]]),R(e[1][e[0]-1],V),c(V).jqGrid("setSelection",e[1][e[0]-1]),c.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(V,"prev",c("#"+X),e[1][e[0]-1]),T(e[0]-1,e)),L(),!1});var S=U();T(S[0],S)}}})},delGridRow:function(a,b){var i=c.jgrid.getRegional(this[0],"del"),j=this[0].p.styleUI,k=c.jgrid.styleUI[j].formedit,l=c.jgrid.styleUI[j].common;return b=c.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},i,b||{}),d[c(this)[0].p.id]=b,this.each(function(){var g=this;if(g.grid&&a){var h,z,A,B,C=c.isFunction(d[g.p.id].beforeShowForm),D=c.isFunction(d[g.p.id].afterShowForm),E=c.isFunction(d[g.p.id].beforeInitData)?d[g.p.id].beforeInitData:!1,F=g.p.id,G={},H=!0,I="DelTbl_"+c.jgrid.jqID(F),J="DelTbl_"+F,K={themodal:"delmod"+F,modalhead:"delhd"+F,modalcontent:"delcnt"+F,scrollelm:I};if(d[g.p.id].styleUI=g.p.styleUI||"jQueryUI",c.isArray(a)&&(a=a.join()),void 0!==c("#"+c.jgrid.jqID(K.themodal))[0]){if(E&&(H=E.call(g,c("#"+I)),void 0===H&&(H=!0)),H===!1){return}c("#DelData>td","#"+I).text(a),c("#DelError","#"+I).hide(),d[g.p.id].processing===!0&&(d[g.p.id].processing=!1,c("#dData","#"+I).removeClass(l.active)),C&&d[g.p.id].beforeShowForm.call(g,c("#"+I)),c.jgrid.viewModal("#"+c.jgrid.jqID(K.themodal),{gbox:"#gbox_"+c.jgrid.jqID(F),jqm:d[g.p.id].jqModal,jqM:!1,overlay:d[g.p.id].overlay,modal:d[g.p.id].modal}),D&&d[g.p.id].afterShowForm.call(g,c("#"+I))}else{var L=isNaN(d[g.p.id].dataheight)?d[g.p.id].dataheight:d[g.p.id].dataheight+"px",M=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",N="<div id='"+J+"' class='formdata' style='width:"+M+";overflow:auto;position:relative;height:"+L+";'>";N+="<table class='DelTable'><tbody>",N+="<tr id='DelError' style='display:none'><td class='"+l.error+"'></td></tr>",N+="<tr id='DelData' style='display:none'><td >"+a+"</td></tr>",N+='<tr><td class="delmsg" style="white-space:pre;">'+d[g.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",N+="</tbody></table></div>";var O="<a id='dData' class='fm-button "+l.button+"'>"+b.bSubmit+"</a>",P="<a id='eData' class='fm-button "+l.button+"'>"+b.bCancel+"</a>";if(N+="<table class='EditTable ui-common-table' id='"+I+"_2'><tbody><tr><td><hr class='"+l.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+O+"&#160;"+P+"</td></tr></tbody></table>",b.gbox="#gbox_"+c.jgrid.jqID(F),c.jgrid.createModal(K,N,d[g.p.id],"#gview_"+c.jgrid.jqID(g.p.id),c("#gview_"+c.jgrid.jqID(g.p.id))[0]),E&&(H=E.call(g,c(N)),void 0===H&&(H=!0)),H===!1){return}c(".fm-button","#"+I+"_2").hover(function(){c(this).addClass(l.hover)},function(){c(this).removeClass(l.hover)}),b.delicon=c.extend([!0,"left",k.icon_del],d[g.p.id].delicon),b.cancelicon=c.extend([!0,"left",k.icon_cancel],d[g.p.id].cancelicon),b.delicon[0]===!0&&c("#dData","#"+I+"_2").addClass("right"===b.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+l.icon_base+" "+b.delicon[2]+"'></span>"),b.cancelicon[0]===!0&&c("#eData","#"+I+"_2").addClass("right"===b.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+l.icon_base+" "+b.cancelicon[2]+"'></span>"),c("#dData","#"+I+"_2").click(function(){var e,f=[!0,""],o=c("#DelData>td","#"+I).text();if(G={},c.isFunction(d[g.p.id].onclickSubmit)&&(G=d[g.p.id].onclickSubmit.call(g,d[g.p.id],o)||{}),c.isFunction(d[g.p.id].beforeSubmit)&&(f=d[g.p.id].beforeSubmit.call(g,o)),f[0]&&!d[g.p.id].processing){if(d[g.p.id].processing=!0,A=g.p.prmNames,h=c.extend({},d[g.p.id].delData,G),B=A.oper,h[B]=A.deloper,z=A.id,o=String(o).split(","),!o.length){return !1}for(e in o){o.hasOwnProperty(e)&&(o[e]=c.jgrid.stripPref(g.p.idPrefix,o[e]))}h[z]=o.join(),c(this).addClass(l.active);var p=c.extend({url:d[g.p.id].url||c(g).jqGrid("getGridParam","editurl"),type:d[g.p.id].mtype,data:c.isFunction(d[g.p.id].serializeDelData)?d[g.p.id].serializeDelData.call(g,h):h,complete:function(m,n){var r;if(c("#dData","#"+I+"_2").removeClass(l.active),m.status>=300&&304!==m.status?(f[0]=!1,c.isFunction(d[g.p.id].errorTextFormat)?f[1]=d[g.p.id].errorTextFormat.call(g,m):f[1]=n+" Status: '"+m.statusText+"'. Error code: "+m.status):c.isFunction(d[g.p.id].afterSubmit)&&(f=d[g.p.id].afterSubmit.call(g,m,h)),f[0]===!1){c("#DelError>td","#"+I).html(f[1]),c("#DelError","#"+I).show()}else{if(d[g.p.id].reloadAfterSubmit&&"local"!==g.p.datatype){c(g).trigger("reloadGrid")}else{if(g.p.treeGrid===!0){try{c(g).jqGrid("delTreeNode",g.p.idPrefix+o[0])}catch(s){}}else{for(r=0;r<o.length;r++){c(g).jqGrid("delRowData",g.p.idPrefix+o[r])}}g.p.selrow=null,g.p.selarrrow=[]}c.isFunction(d[g.p.id].afterComplete)&&setTimeout(function(){d[g.p.id].afterComplete.call(g,m,o)},500)}d[g.p.id].processing=!1,f[0]&&c.jgrid.hideModal("#"+c.jgrid.jqID(K.themodal),{gb:"#gbox_"+c.jgrid.jqID(F),jqm:b.jqModal,onClose:d[g.p.id].onClose})}},c.jgrid.ajaxOptions,d[g.p.id].ajaxDelOptions);if(p.url||d[g.p.id].useDataProxy||(c.isFunction(g.p.dataProxy)?d[g.p.id].useDataProxy=!0:(f[0]=!1,f[1]+=" "+c.jgrid.getRegional(g,"errors.nourl"))),f[0]){if(d[g.p.id].useDataProxy){var q=g.p.dataProxy.call(g,p,"del_"+g.p.id);void 0===q&&(q=[!0,""]),q[0]===!1?(f[0]=!1,f[1]=q[1]||"Error deleting the selected row!"):c.jgrid.hideModal("#"+c.jgrid.jqID(K.themodal),{gb:"#gbox_"+c.jgrid.jqID(F),jqm:b.jqModal,onClose:d[g.p.id].onClose})}else{"clientArray"===p.url?(h=p.data,p.complete({status:200,statusText:""},"")):c.ajax(p)}}}return f[0]===!1&&(c("#DelError>td","#"+I).html(f[1]),c("#DelError","#"+I).show()),!1}),c("#eData","#"+I+"_2").click(function(){return c.jgrid.hideModal("#"+c.jgrid.jqID(K.themodal),{gb:"#gbox_"+c.jgrid.jqID(F),jqm:d[g.p.id].jqModal,onClose:d[g.p.id].onClose}),!1}),C&&d[g.p.id].beforeShowForm.call(g,c("#"+I)),c.jgrid.viewModal("#"+c.jgrid.jqID(K.themodal),{gbox:"#gbox_"+c.jgrid.jqID(F),jqm:d[g.p.id].jqModal,overlay:d[g.p.id].overlay,modal:d[g.p.id].modal}),D&&d[g.p.id].afterShowForm.call(g,c("#"+I))}d[g.p.id].closeOnEscape===!0&&setTimeout(function(){c(".ui-jqdialog-titlebar-close","#"+c.jgrid.jqID(K.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(a,m,n,o,p,q,r){var s=c.jgrid.getRegional(this[0],"nav"),t=this[0].p.styleUI,u=c.jgrid.styleUI[t].navigator,v=c.jgrid.styleUI[t].common;return m=c.extend({edit:!0,editicon:u.icon_edit_nav,add:!0,addicon:u.icon_add_nav,del:!0,delicon:u.icon_del_nav,search:!0,searchicon:u.icon_search_nav,refresh:!0,refreshicon:u.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:u.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},s,m||{}),this.each(function(){if(!this.p.navGrid){var b,e,f,g={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},h=this;if(h.grid&&"string"==typeof a){c(h).data("navGrid")||c(h).data("navGrid",m),f=c(h).data("navGrid"),h.p.force_regional&&(f=c.extend(f,s)),void 0===c("#"+g.themodal)[0]&&(f.alerttop||f.alertleft||(void 0!==window.innerWidth?(f.alertleft=window.innerWidth,f.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(f.alertleft=document.documentElement.clientWidth,f.alerttop=document.documentElement.clientHeight):(f.alertleft=1024,f.alerttop=768),f.alertleft=f.alertleft/2-parseInt(f.alertwidth,10)/2,f.alerttop=f.alerttop/2-25),c.jgrid.createModal(g,"<div>"+f.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+c.jgrid.jqID(h.p.id),jqModal:!0,drag:!0,resize:!0,caption:f.alertcap,top:f.alerttop,left:f.alertleft,width:f.alertwidth,height:f.alertheight,closeOnEscape:f.closeOnEscape,zIndex:f.alertzIndex,styleUI:h.p.styleUI},"#gview_"+c.jgrid.jqID(h.p.id),c("#gbox_"+c.jgrid.jqID(h.p.id))[0],!0));var i,j=1,l=function(){c(this).hasClass(v.disabled)||c(this).addClass(v.hover)},z=function(){c(this).removeClass(v.hover)};for(f.cloneToTop&&h.p.toppager&&(j=2),i=0;j>i;i++){var A,B,C,D=c("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),E="<td class='ui-pg-button "+v.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===i?(B=a,C=h.p.id,B===h.p.toppager&&(C+="_top",j=1)):(B=h.p.toppager,C=h.p.id+"_top"),"rtl"===h.p.direction&&c(D).attr("dir","rtl").css("float","right"),o=o||{},f.add&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.addicon+"'></span>"+f.addtext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.addtitle||"",id:o.id||"add_"+C}).click(function(){return c(this).hasClass(v.disabled)||(c.isFunction(f.addfunc)?f.addfunc.call(h):c(h).jqGrid("editGridRow","new",o)),!1}).hover(l,z),A=null),n=n||{},f.edit&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.editicon+"'></span>"+f.edittext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.edittitle||"",id:n.id||"edit_"+C}).click(function(){if(!c(this).hasClass(v.disabled)){var k=h.p.selrow;k?c.isFunction(f.editfunc)?f.editfunc.call(h,k):c(h).jqGrid("editGridRow",k,n):(c.jgrid.viewModal("#"+g.themodal,{gbox:"#gbox_"+c.jgrid.jqID(h.p.id),jqm:!0}),c("#jqg_alrt").focus())}return !1}).hover(l,z),A=null),r=r||{},f.view&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.viewicon+"'></span>"+f.viewtext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.viewtitle||"",id:r.id||"view_"+C}).click(function(){if(!c(this).hasClass(v.disabled)){var k=h.p.selrow;k?c.isFunction(f.viewfunc)?f.viewfunc.call(h,k):c(h).jqGrid("viewGridRow",k,r):(c.jgrid.viewModal("#"+g.themodal,{gbox:"#gbox_"+c.jgrid.jqID(h.p.id),jqm:!0}),c("#jqg_alrt").focus())}return !1}).hover(l,z),A=null),p=p||{},f.del&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.delicon+"'></span>"+f.deltext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.deltitle||"",id:p.id||"del_"+C}).click(function(){if(!c(this).hasClass(v.disabled)){var k;h.p.multiselect?(k=h.p.selarrrow,0===k.length&&(k=null)):k=h.p.selrow,k?c.isFunction(f.delfunc)?f.delfunc.call(h,k):c(h).jqGrid("delGridRow",k,p):(c.jgrid.viewModal("#"+g.themodal,{gbox:"#gbox_"+c.jgrid.jqID(h.p.id),jqm:!0}),c("#jqg_alrt").focus())}return !1}).hover(l,z),A=null),(f.add||f.edit||f.del||f.view)&&c("tr",D).append(E),q=q||{},f.search&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.searchicon+"'></span>"+f.searchtext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.searchtitle||"",id:q.id||"search_"+C}).click(function(){return c(this).hasClass(v.disabled)||(c.isFunction(f.searchfunc)?f.searchfunc.call(h,q):c(h).jqGrid("searchGrid",q)),!1}).hover(l,z),q.showOnLoad&&q.showOnLoad===!0&&c(A,D).click(),A=null),f.refresh&&(A=c("<td class='ui-pg-button "+v.cornerall+"'></td>"),c(A).append("<div class='ui-pg-div'><span class='"+v.icon_base+" "+f.refreshicon+"'></span>"+f.refreshtext+"</div>"),c("tr",D).append(A),c(A,D).attr({title:f.refreshtitle||"",id:"refresh_"+C}).click(function(){if(!c(this).hasClass(v.disabled)){c.isFunction(f.beforeRefresh)&&f.beforeRefresh.call(h),h.p.search=!1,h.p.resetsearch=!0;try{if("currentfilter"!==f.refreshstate){var k=h.p.id;h.p.postData.filters="";try{c("#fbox_"+c.jgrid.jqID(k)).jqFilter("resetFilter")}catch(w){}c.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}}catch(x){}switch(f.refreshstate){case"firstpage":c(h).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":c(h).trigger("reloadGrid",[{current:!0}])}c.isFunction(f.afterRefresh)&&f.afterRefresh.call(h)}return !1}).hover(l,z),A=null),e=c(".ui-jqgrid").css("font-size")||"11px",c("body").append("<div id='testpg2' class='ui-jqgrid "+c.jgrid.styleUI[t].base.entrieBox+"' style='font-size:"+e+";visibility:hidden;' ></div>"),b=c(D).clone().appendTo("#testpg2").width(),c("#testpg2").remove(),h.p._nvtd&&(f.dropmenu?(D=null,c(h).jqGrid("_buildNavMenu",B,C,m,n,o,p,q,r)):b>h.p._nvtd[0]?(h.p.responsive?(D=null,c(h).jqGrid("_buildNavMenu",B,C,m,n,o,p,q,r)):c(B+"_"+f.position,B).append(D).width(b),h.p._nvtd[0]=b):c(B+"_"+f.position,B).append(D),h.p._nvtd[1]=b),h.p.navGrid=!0}h.p.storeNavOptions&&(h.p.navOptions=f,h.p.editOptions=n,h.p.addOptions=o,h.p.delOptions=p,h.p.searchOptions=q,h.p.viewOptions=r,h.p.navButtons=[])}}})},navButtonAdd:function(a,f){var g=this[0].p.styleUI,h=c.jgrid.styleUI[g].navigator;return f=c.extend({caption:"newButton",title:"",buttonicon:h.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},f||{}),this.each(function(){if(this.grid){"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+c.jgrid.jqID(a));var b=c(".navtable",a)[0],o=this,p=c.jgrid.styleUI[g].common.disabled,q=c.jgrid.styleUI[g].common.hover,r=c.jgrid.styleUI[g].common.cornerall,s=c.jgrid.styleUI[g].common.icon_base;if(o.p.storeNavOptions&&!f.internal&&o.p.navButtons.push([a,f]),b){if(f.id&&void 0!==c("#"+c.jgrid.jqID(f.id),b)[0]){return}var t=c("<td></td>");"NONE"===f.buttonicon.toString().toUpperCase()?c(t).addClass("ui-pg-button "+r).append("<div class='ui-pg-div'>"+f.caption+"</div>"):c(t).addClass("ui-pg-button "+r).append("<div class='ui-pg-div'><span class='"+s+" "+f.buttonicon+"'></span>"+f.caption+"</div>"),f.id&&c(t).attr("id",f.id),"first"===f.position?0===b.rows[0].cells.length?c("tr",b).append(t):c("tr td:eq(0)",b).before(t):c("tr",b).append(t),c(t,b).attr("title",f.title||"").click(function(e){return c(this).hasClass(p)||c.isFunction(f.onClickButton)&&f.onClickButton.call(o,e),!1}).hover(function(){c(this).hasClass(p)||c(this).addClass(q)},function(){c(this).removeClass(q)})}else{if(b=c(".dropdownmenu",a)[0]){var u=c(b).val(),v=f.id||c.jgrid.randId(),w=c('<li class="ui-menu-item" role="presentation"><a class="'+r+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(f.caption||f.title)+"</a></li>");u&&("first"===f.position?c("#"+u).prepend(w):c("#"+u).append(w),c(w).on("click",function(e){return c(this).hasClass(p)||(c("#"+u).hide(),c.isFunction(f.onClickButton)&&f.onClickButton.call(o,e)),!1}).find("a").hover(function(){c(this).hasClass(p)||c(this).addClass(q)},function(){c(this).removeClass(q)}))}}}})},navSeparatorAdd:function(a,f){var g=this[0].p.styleUI,h=c.jgrid.styleUI[g].common;return f=c.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},f||{}),this.each(function(){if(this.grid){"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+c.jgrid.jqID(a));var b,e,i=c(".navtable",a)[0];this.p.storeNavOptions&&this.p.navButtons.push([a,f]),i?(b="<td class='ui-pg-button "+h.disabled+"' style='width:4px;'><span class='"+f.sepclass+"'></span>"+f.sepcontent+"</td>","first"===f.position?0===i.rows[0].cells.length?c("tr",i).append(b):c("tr td:eq(0)",i).before(b):c("tr",i).append(b)):(i=c(".dropdownmenu",a)[0],b="<li class='ui-menu-item "+h.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",i&&(e=c(i).val(),e&&("first"===f.position?c("#"+e).prepend(b):c("#"+e).append(b))))}})},_buildNavMenu:function(a,j,k,l,m,n,o,p){return this.each(function(){var b=this,e=c.jgrid.getRegional(b,"nav"),f=b.p.styleUI,g=(c.jgrid.styleUI[f].navigator,c.jgrid.styleUI[f].filter),h=c.jgrid.styleUI[f].common,i="form_menu_"+c.jgrid.randId(),t=k.navButtonText?k.navButtonText:e.selectcaption||"Actions",u="<button class='dropdownmenu "+h.button+"' value='"+i+"'>"+t+"</button>";c(a+"_"+k.position,a).append(u);var v={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},w=function(){var q,r,s=c(".ui-jqgrid-view").css("font-size")||"11px",x=c('<ul id="'+i+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+s+'"></ul>');k.add&&(m=m||{},q=m.id||"add_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.addtext||k.addtitle)+"</a></li>").click(function(){return c(this).hasClass(h.disabled)||(c.isFunction(k.addfunc)?k.addfunc.call(b):c(b).jqGrid("editGridRow","new",m),c(x).hide()),!1}),c(x).append(r)),k.edit&&(l=l||{},q=l.id||"edit_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.edittext||k.edittitle)+"</a></li>").click(function(){if(!c(this).hasClass(h.disabled)){var y=b.p.selrow;y?c.isFunction(k.editfunc)?k.editfunc.call(b,y):c(b).jqGrid("editGridRow",y,l):(c.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+c.jgrid.jqID(b.p.id),jqm:!0}),c("#jqg_alrt").focus()),c(x).hide()}return !1}),c(x).append(r)),k.view&&(p=p||{},q=p.id||"view_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.viewtext||k.viewtitle)+"</a></li>").click(function(){if(!c(this).hasClass(h.disabled)){var y=b.p.selrow;y?c.isFunction(k.editfunc)?k.viewfunc.call(b,y):c(b).jqGrid("viewGridRow",y,p):(c.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+c.jgrid.jqID(b.p.id),jqm:!0}),c("#jqg_alrt").focus()),c(x).hide()}return !1}),c(x).append(r)),k.del&&(n=n||{},q=n.id||"del_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.deltext||k.deltitle)+"</a></li>").click(function(){if(!c(this).hasClass(h.disabled)){var y;b.p.multiselect?(y=b.p.selarrrow,0===y.length&&(y=null)):y=b.p.selrow,y?c.isFunction(k.delfunc)?k.delfunc.call(b,y):c(b).jqGrid("delGridRow",y,n):(c.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+c.jgrid.jqID(b.p.id),jqm:!0}),c("#jqg_alrt").focus()),c(x).hide()}return !1}),c(x).append(r)),(k.add||k.edit||k.del||k.view)&&c(x).append("<li class='ui-menu-item "+h.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),k.search&&(o=o||{},q=o.id||"search_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.searchtext||k.searchtitle)+"</a></li>").click(function(){return c(this).hasClass(h.disabled)||(c.isFunction(k.searchfunc)?k.searchfunc.call(b,o):c(b).jqGrid("searchGrid",o),c(x).hide()),!1}),c(x).append(r),o.showOnLoad&&o.showOnLoad===!0&&c(r).click()),k.refresh&&(q=o.id||"search_"+j,r=c('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+q+'">'+(k.refreshtext||k.refreshtitle)+"</a></li>").click(function(){if(!c(this).hasClass(h.disabled)){c.isFunction(k.beforeRefresh)&&k.beforeRefresh.call(b),b.p.search=!1,b.p.resetsearch=!0;try{if("currentfilter"!==k.refreshstate){var y=b.p.id;b.p.postData.filters="";try{c("#fbox_"+c.jgrid.jqID(y)).jqFilter("resetFilter")}catch(z){}c.isFunction(b.clearToolbar)&&b.clearToolbar.call(b,!1)}}catch(A){}switch(k.refreshstate){case"firstpage":c(b).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":c(b).trigger("reloadGrid",[{current:!0}])}c.isFunction(k.afterRefresh)&&k.afterRefresh.call(b),c(x).hide()}return !1}),c(x).append(r)),c(x).hide(),c("body").append(x),c("#"+i).addClass("ui-menu "+g.menu_widget),c("#"+i+" > li > a").hover(function(){c(this).addClass(h.hover)},function(){c(this).removeClass(h.hover)})};w(),c(".dropdownmenu",a+"_"+k.position).on("click",function(q){var r=c(this).offset(),s=r.left,x=parseInt(r.top),y=c(this).val();c("#"+y).show().css({top:x-(c("#"+y).height()+10)+"px",left:s+"px"}),q.stopPropagation()}),c("body").on("click",function(q){c(q.target).hasClass("dropdownmenu")||c("#"+i).hide()})})},GridToForm:function(a,e){return this.each(function(){var b,g=this;if(g.grid){var h=c(g).jqGrid("getRowData",a);if(h){for(b in h){h.hasOwnProperty(b)&&(c("[name="+c.jgrid.jqID(b)+"]",e).is("input:radio")||c("[name="+c.jgrid.jqID(b)+"]",e).is("input:checkbox")?c("[name="+c.jgrid.jqID(b)+"]",e).each(function(){c(this).val()==h[b]?c(this)[g.p.useProp?"prop":"attr"]("checked",!0):c(this)[g.p.useProp?"prop":"attr"]("checked",!1)}):c("[name="+c.jgrid.jqID(b)+"]",e).val(h[b]))}}}})},FormToGrid:function(a,f,g,h){return this.each(function(){var b=this;if(b.grid){g||(g="set"),h||(h="first");var e=c(f).serializeArray(),i={};c.each(e,function(j,k){i[k.name]=k.value}),"add"===g?c(b).jqGrid("addRowData",a,i,h):"set"===g&&c(b).jqGrid("setRowData",a,i)}})}})});