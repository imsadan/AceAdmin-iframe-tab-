!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(j){j.fn.jqDrag=function(b){return p(this,b,"d")},j.fn.jqResize=function(c,d){return p(this,c,"r",d)},j.jqDnR={dnr:{},e:0,drag:function(b){return"d"==n.k?o.css({left:n.X+b.pageX-n.pX,top:n.Y+b.pageY-n.pY}):(o.css({width:Math.max(b.pageX-n.pX+n.W,0),height:Math.max(b.pageY-n.pY+n.H,0)}),l&&k.css({width:Math.max(b.pageX-l.pX+l.W,0),height:Math.max(b.pageY-l.pY+l.H,0)})),!1},stop:function(){j(document).unbind("mousemove",m.drag).unbind("mouseup",m.stop)}};var k,l,m=j.jqDnR,n=m.dnr,o=m.e,p=function(a,b,c,e){return a.each(function(){b=b?j(b,a):a,b.bind("mousedown",{e:a,k:c},function(f){var h=f.data,i={};if(o=h.e,k=e?j(e):!1,"relative"!=o.css("position")){try{o.position(i)}catch(s){}}if(n={X:i.left||q("left")||0,Y:i.top||q("top")||0,W:q("width")||o[0].scrollWidth||0,H:q("height")||o[0].scrollHeight||0,pX:f.pageX,pY:f.pageY,k:h.k},l=k&&"d"!=h.k?{X:i.left||r("left")||0,Y:i.top||r("top")||0,W:k[0].offsetWidth||r("width")||0,H:k[0].offsetHeight||r("height")||0,pX:f.pageX,pY:f.pageY,k:h.k}:!1,j("input.hasDatepicker",o[0])[0]){try{j("input.hasDatepicker",o[0]).datepicker("hide")}catch(t){}}return j(document).mousemove(j.jqDnR.drag).mouseup(j.jqDnR.stop),!1})})},q=function(b){return parseInt(o.css(b),10)||!1},r=function(b){return parseInt(k.css(b),10)||!1};j.fn.tinyDraggable=function(a){var d=j.extend({handle:0,exclude:0},a);return this.each(function(){var c,g,h=j(this),i=d.handle?j(d.handle,h):h;i.on({mousedown:function(b){if(!d.exclude||!~j.inArray(b.target,j(d.exclude,h))){b.preventDefault();var e=h.offset();c=b.pageX-e.left,g=b.pageY-e.top,j(document).on("mousemove.drag",function(f){h.offset({top:f.pageY-g,left:f.pageX-c})})}},mouseup:function(e){j(document).off("mousemove.drag")}})})}});